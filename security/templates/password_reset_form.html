<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Reset your password</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background: #f6f7f9; }
    .page { max-width: 480px; margin: 5vh auto; padding: 24px; background: #fff; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,.05); }
    h1 { font-size: 20px; margin: 0 0 12px; }
    p { color: #444; line-height: 1.5; }
    .alert { padding: 12px 14px; border-radius: 8px; margin: 12px 0; }
    .alert-error { background: #fee2e2; color: #991b1b; }
    .alert-success { background: #dcfce7; color: #166534; }
    form { margin-top: 12px; }
    label { display: block; font-weight: 600; margin: 10px 0 6px; }
    input[type="password"] { width: 100%; padding: 10px 12px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 14px; }
    .help { color: #6b7280; font-size: 12px; margin-top: 6px; }
    button { margin-top: 16px; width: 100%; padding: 12px; border: 0; border-radius: 8px; background: #111827; color: #fff; font-weight: 600; cursor: pointer; }
    button:hover { background: #0b1220; }
    .muted { color: #6b7280; font-size: 14px; }
  </style>
</head>
<body>
  <div class="page">
    {% if invalid %}
      <h1>Invalid or expired link</h1>
      {% if reason == "expired" %}
        <div class="alert alert-error">This reset link has expired (over 48 hours). Please request a new one.</div>
      {% elif reason == "used" %}
        <div class="alert alert-error">This reset link was already used. Please request a new one.</div>
      {% else %}
        <div class="alert alert-error">We couldn't validate your reset link. Please request a new one.</div>
      {% endif %}
      <p class="muted">Return to the app and start a new password reset request.</p>
    {% else %}
      <h1>Create a new password</h1>

      {% if messages %}
        {% for m in messages %}
          <div class="alert {% if m.tags == 'success' %}alert-success{% else %}alert-error{% endif %}">
            {{ m }}
          </div>
        {% endfor %}
      {% endif %}

      <form method="post">
        {% csrf_token %}

        <input type="hidden" name="token" value="{{ token }}"/>

        <label for="password">New password</label>
        <input id="password" name="password" type="password" required autocomplete="new-password" />
        <div class="help">
          Use at least 8 characters. Avoid common words. A mix of letters, numbers, and symbols is recommended.
        </div>

        <label for="password2">Confirm new password</label>
        <input id="password2" name="password2" type="password" required autocomplete="new-password" />

        <button type="submit">Reset password</button>
      </form>
      <p class="help">This link is valid for up to 48 hours from the time you received the email.</p>
    {% endif %}
  </div>
</body>
</html>
